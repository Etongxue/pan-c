{"version":3,"sources":["../node_modules/pdfjs-dist/build sync","component/Viewer/PDF.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","pdfjs","GlobalWorkerOptions","workerSrc","version","useStyles","makeStyles","theme","layout","marginTop","marginLeft","spacing","marginRight","breakpoints","up","maxWidth","canvas","width","height","borderRadius","paper","marginBottom","PDFViewer","t","useTranslation","math","useRouteMatch","location","useLocation","query","URLSearchParams","search","useParams","UseFileSubTitle","useState","pageNumber","setPageNumber","dispatch","useDispatch","ToggleSnackbar","useCallback","vertical","horizontal","msg","color","toggleSnackbar","removeTextLayerOffset","document","querySelectorAll","forEach","layer","style","display","classes","className","onLoadSuccess","numPages","onLoadError","error","message","loading","elevation","file","getBaseURL","pathHelper","isSharePage","pathname","get","encodeURIComponent","Array","from","el","index","key","renderAnnotationLayer"],"mappings":"kHAAA,SAASA,EAAoBC,GAC5B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBF,EAAM,KAEjD,MADAC,EAAEE,KAAO,mBACHF,EAEPF,EAAoBK,KAAO,WAAa,MAAO,IAC/CL,EAAoBM,QAAUN,EAC9BO,EAAOC,QAAUR,EACjBA,EAAoBS,GAAK,M,wTCKzBC,QAAMC,oBAAoBC,UAA1B,kDAAiFF,QAAMG,QAAvF,kBAEA,IAAMC,EAAYC,aAAW,SAACC,GAAD,YAAY,CACrCC,QAAM,GACFC,UAAW,OACXC,WAAYH,EAAMI,QAAQ,GAC1BC,YAAaL,EAAMI,QAAQ,IAHzB,cAIDJ,EAAMM,YAAYC,GAAG,KAA0B,EAAnBP,EAAMI,QAAQ,IAAU,CACjDI,SAAU,IACVL,WAAY,OACZE,YAAa,SAPf,6BASY,IATZ,GAWN,UAAW,CACPI,OAAQ,CACJC,MAAO,kBACPC,OAAQ,kBACRC,aAAc,IAGtBC,MAAO,CACHC,aAAcd,EAAMI,QAAQ,QAQrB,SAASW,IACpB,IAAQC,EAAMC,cAAND,EACFE,EAAOC,cACPC,EAAWC,cACXC,EAPC,IAAIC,gBAAgBF,cAAcG,QAQjC/B,EAAOgC,cAAPhC,GACRiC,YAAgBJ,EAAOJ,EAAME,GAE7B,MAAoCO,mBAAS,GAA7C,mBAAOC,EAAP,KAAmBC,EAAnB,KAEMC,EAAWC,cACXC,EAAiBC,uBACnB,SAACC,EAAUC,EAAYC,EAAKC,GAA5B,OACIP,EAASQ,YAAeJ,EAAUC,EAAYC,EAAKC,MACvD,CAACP,IAECS,EAAwB,WACPC,SAASC,iBACxB,iCAEOC,SAAQ,SAACC,GACEA,EAAVC,MACFC,QAAU,WAIlBC,EAAUhD,IAChB,OACI,yBAAKiD,UAAWD,EAAQ7C,QACpB,kBAAC,WAAD,CACI+C,cAAe,gBAAGC,EAAH,EAAGA,SAAH,OAAkBpB,EAAcoB,IAC/CC,YAAa,SAACC,GACVnB,EACI,MACA,QACAhB,EAAE,8BAA+B,CAC7BoB,IAAKe,EAAMC,UAEf,UAGRC,QACI,kBAAC,IAAD,CAAON,UAAWD,EAAQjC,MAAOyC,UAAW,GACxC,kBAAC,IAAD,OAGRC,KACIC,eACCC,IAAWC,YAAYtC,EAASuC,UAC3B,kBACAlE,GAC6B,KAA5B6B,EAAMsC,IAAI,cACL,SACAC,mBAAmBvC,EAAMsC,IAAI,eAC7B,IACN,iBAAmBtC,EAAMsC,IAAI,QAGtCE,MAAMC,KAAK,IAAID,MAAMlC,IAAa,SAACoC,EAAIC,GAAL,OAC/B,kBAAC,IAAD,CAAOlB,UAAWD,EAAQjC,MAAOyC,UAAW,GACxC,kBAAC,OAAD,CACI5C,MAAO,IACPsC,cAAeT,EACf2B,IAAG,eAAUD,EAAQ,GACrBrC,WAAYqC,EAAQ,EACpBE,uBAAuB","file":"static/js/pdf.610e8bf5.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 7353;","import React, { useCallback, useState } from \"react\";\r\nimport { Document, Page, pdfjs } from \"react-pdf\";\r\nimport { Paper } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { useLocation, useParams, useRouteMatch } from \"react-router\";\r\nimport { getBaseURL } from \"../../middleware/Api\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport pathHelper from \"../../utils/page\";\r\nimport TextLoading from \"../Placeholder/TextLoading\";\r\nimport { toggleSnackbar } from \"../../redux/explorer\";\r\nimport UseFileSubTitle from \"../../hooks/fileSubtitle\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\npdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    layout: {\r\n        marginTop: \"30px\",\r\n        marginLeft: theme.spacing(3),\r\n        marginRight: theme.spacing(3),\r\n        [theme.breakpoints.up(1100 + theme.spacing(3) * 2)]: {\r\n            maxWidth: 900,\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n        },\r\n        marginBottom: 50,\r\n    },\r\n    \"@global\": {\r\n        canvas: {\r\n            width: \"100% !important\",\r\n            height: \"auto !important\",\r\n            borderRadius: 4,\r\n        },\r\n    },\r\n    paper: {\r\n        marginBottom: theme.spacing(3),\r\n    },\r\n}));\r\n\r\nfunction useQuery() {\r\n    return new URLSearchParams(useLocation().search);\r\n}\r\n\r\nexport default function PDFViewer() {\r\n    const { t } = useTranslation();\r\n    const math = useRouteMatch();\r\n    const location = useLocation();\r\n    const query = useQuery();\r\n    const { id } = useParams();\r\n    UseFileSubTitle(query, math, location);\r\n\r\n    const [pageNumber, setPageNumber] = useState(1);\r\n\r\n    const dispatch = useDispatch();\r\n    const ToggleSnackbar = useCallback(\r\n        (vertical, horizontal, msg, color) =>\r\n            dispatch(toggleSnackbar(vertical, horizontal, msg, color)),\r\n        [dispatch]\r\n    );\r\n    const removeTextLayerOffset = () => {\r\n        const textLayers = document.querySelectorAll(\r\n            \".react-pdf__Page__textContent\"\r\n        );\r\n        textLayers.forEach((layer) => {\r\n            const { style } = layer;\r\n            style.display = \"none\";\r\n        });\r\n    };\r\n\r\n    const classes = useStyles();\r\n    return (\r\n        <div className={classes.layout}>\r\n            <Document\r\n                onLoadSuccess={({ numPages }) => setPageNumber(numPages)}\r\n                onLoadError={(error) => {\r\n                    ToggleSnackbar(\r\n                        \"top\",\r\n                        \"right\",\r\n                        t(\"fileManager.pdfLoadingError\", {\r\n                            msg: error.message,\r\n                        }),\r\n                        \"error\"\r\n                    );\r\n                }}\r\n                loading={\r\n                    <Paper className={classes.paper} elevation={1}>\r\n                        <TextLoading />\r\n                    </Paper>\r\n                }\r\n                file={\r\n                    getBaseURL() +\r\n                    (pathHelper.isSharePage(location.pathname)\r\n                        ? \"/share/preview/\" +\r\n                          id +\r\n                          (query.get(\"share_path\") !== \"\"\r\n                              ? \"?path=\" +\r\n                                encodeURIComponent(query.get(\"share_path\"))\r\n                              : \"\")\r\n                        : \"/file/preview/\" + query.get(\"id\"))\r\n                }\r\n            >\r\n                {Array.from(new Array(pageNumber), (el, index) => (\r\n                    <Paper className={classes.paper} elevation={1}>\r\n                        <Page\r\n                            width={900}\r\n                            onLoadSuccess={removeTextLayerOffset}\r\n                            key={`page_${index + 1}`}\r\n                            pageNumber={index + 1}\r\n                            renderAnnotationLayer={false}\r\n                        />\r\n                    </Paper>\r\n                ))}\r\n            </Document>\r\n        </div>\r\n    );\r\n}\r\n"],"sourceRoot":""}